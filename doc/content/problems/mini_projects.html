<!DOCTYPE html>
<html lang="en">
<head><title>6 Мини проекты</title>
<meta charset="utf-8">
<link rel="shortcut icon" type="image/png" href="../../favicon.png">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="../../layout/content.css">
<link rel="stylesheet" type="text/css" href="../../layout/more_prog_langs.css">
<link rel="stylesheet" type="text/css" href="../../themes/light/content_theme.css">
<link rel="stylesheet" type="text/css" href="../../themes/light/more_prog_langs_theme.css">
<link rel="stylesheet" type="text/css" href="../../layout/layout.css">
<link rel="stylesheet" type="text/css" href="../../themes/light/layout_theme.css">
<link rel="stylesheet" type="text/css" href="../../custom.css">

<link rel="stylesheet" type="text/css" href="../../layout/flex.css">
</head>
<body>

<div class="header">
<img id="burger" src="../../layout/pict/burger.png" 
onclick="toggleSidebar();return false;" class="toggle_narrow_only_inline" alt="Sidebar">

<a 
class="header_item "
href="../../../readme.html"><img 
class="logo_image" src="../../favicon.png" alt="Logo"></a><a 
class="header_item toggle_wide_only_inline"
href="../../../readme.html"><span class="">Home</span></a><a 
class="header_item toggle_wide_only_inline"
href="../index_page.html"><span class="">Index</span></a><a 
class="header_item "
href="../todo_page.html"><span class="">TODO</span></a><a 
class="header_item "
href="../problems_page.html"><span class="">Задачи</span></a><a 
class="header_item toggle_narrow_only_inline"
href="../index_page.html"><img 
class="header_image index_image" src="../../layout/pict/search.png" alt="Index"></a><a 
class="header_item toggle_wide_only_inline "
href="https://github.com/mycatislovely/python_study"><span class="">GitHub</span></a>
<a href="../../../doc_src/problems/mini_projects.txt" class="source_file toggle_wide_only_inline" title="Source text">&lt;/&gt;</a>

<a href="5_chess.html" title="Previous: 5 Шахматы"><img class="headerNavArrows"
src="../../layout/pict/previous_page_h21px.png" alt="Back"></a>
 

<img class="headerNavArrows" src="../../layout/pict/next_page_h21px_inactive.png"
alt="No next">

<span class="headerTitle">6 Мини проекты</span>

</div>

<div class="sidebarWrapper">
<div class="sidebar">
    <table class="sidebarAligner">
        <tr><td class="valign_top">
            <div class="align_right toggle_narrow_only_block">
            <a class="sidebar_item_inline align_right" href="https://github.com/mycatislovely/python_study">GitHub</a>
            
            <a href="../../../doc_src/problems/mini_projects.txt" class="sidebar_item_inline source_file align_right" 
                title="Source text">&lt;/&gt;</a>
            
            </div>
            <div class="sidebar_block">
            
            <a class="sidebar_item " href="../about.html">Введение</a>
            <a class="sidebar_item " href="../architecture.html">Основы программирования</a>
            <a class="sidebar_item " href="../program_design.html">Проектирование программ</a>
            <a class="sidebar_item " href="../command_line_work.html">Работа в командной строке</a>
            <a class="sidebar_item " href="../related_technologies.html">Сопутствующие технологии</a>
            <a class="sidebar_item " href="../python_working_environment.html">Рабочая среда Python</a>
            <a class="sidebar_item " href="../python_program_elements.html">Элементы программы на языке Python</a>
            <a class="sidebar_item " href="../programming_techniques.html">Приемы программирования</a>
            <a class="sidebar_item " href="../algorithms_and_data_structures.html">Алгоритмы и структуры данных</a>
            <a class="sidebar_item " href="../web_programming.html">Веб-программирование</a>
            <a class="sidebar_item " href="../technical_English.html">Technical English</a>
            </div><div class="sidebar_block">
            <h3>Useful links</h3>
            <a class="sidebar_item " href="https://www.python.org/">Python</a>
            <a class="sidebar_item " href="https://git-scm.com/">Git</a>
            </div>
        </td></tr>
        <tr><td class="bottom valign_bottom"><span class="poweredBy">Powered by <a class="poweredByLink"
            href="https://github.com/arctrong/md2html">md2html_py</a> 1.0.7</span>
        </td></tr>
    </table>
</div>
</div>

<p style="font-size:44px;font-weight:bold;margin:0 0 30px 0;">6 Мини проекты</p>

<div class="toc">
<ul>
<li><a href="#_1">Числовая угадайка</a></li>
<li><a href="#_2">Магический шар</a></li>
<li><a href="#_3">Генератор безопасных паролей</a></li>
<li><a href="#_4">Шифр Цезаря</a></li>
<li><a href="#_5">Выбор уникальных сообщений</a></li>
<li><a href="#textart">Цифры в стиле Textart</a></li>
</ul>
</div>
<hr />
<p><a name="index_entry_p_1"></a><a name="guessing_game"></a></p>
<h1 id="_1">Числовая угадайка</h1>
<p>Описание проекта: программа генерирует случайное число в диапазоне от 1 до N и просит пользователя 
угадать это число. Если догадка пользователя больше случайного числа, то программа должна вывести 
сообщение 'Слишком много, попробуйте еще раз'. Если догадка меньше случайного числа, то программа 
должна вывести сообщение 'Слишком мало, попробуйте еще раз'. Если пользователь угадывает число, то 
программа должна поздравить его и вывести сообщение 'Вы угадали, поздравляем!'.</p>
<pre class="highlight"><code class="language-code">from random import randint


def to_number(s, n_max=0):
    if not s.isdigit():
        return 0
    n = int(s)
    if n_max == 0 or n &lt;= n_max:
        return n
    return 0


def play(n):
    d = randint(1, n)
    print(f'Задумано целое число от 1 до {n}. Угадывайте...')
    count = 0
    while True:
        s = input("Введите ваше предположение: ") 
        i = to_number(s, n) 
        if i == 0:
            print(f'А может быть все-таки введете целое число от 1 до {n}?')
            continue
        count += 1   
        if i &gt; d:
            print('Ваше число больше загаданного, попробуйте еще разок')
        elif i &lt; d:
            print('Ваше число меньше загаданного, попробуйте еще разок')
        else:
            print('Вы угадали, поздравляем!')
            print(f'Количество попыток: {count}')
            break    


another_game = False
print('Добро пожаловать в числовую угадайку')
while True:
    if another_game:
        print()
        print('Играем ещё раз?')
    s = input("Введите целое число больше нуля\n(или что-то иное для завершения): ") 
    n = to_number(s) 
    if n &gt; 0:
        play(n)
    else:
        break
    another_game = True
print('Спасибо, что играли в числовую угадайку. Еще увидимся...')</code></pre>
<p>В целях инкапсуляции создаем служебную функцию <code>to_number</code>, которая преобразует строку в число
большее нуля, либо ноль, если введено что-то отличное от цифр. Также эта функция может проверять 
верхнюю границу. </p>
<p>Пример работы программы:</p>
<pre class="highlight"><code class="language-shell">&gt;python guessing_game.py
Добро пожаловать в числовую угадайку
Введите целое число больше нуля
(или что-то иное для завершения): 7
Задумано целое число от 1 до 7. Угадывайте...
Введите ваше предположение: 8
А может быть все-таки введете целое число от 1 до 7?
Введите ваше предположение: 3
Ваше число больше загаданного, попробуйте еще разок
Введите ваше предположение: 2
Ваше число больше загаданного, попробуйте еще разок
Введите ваше предположение: 1
Вы угадали, поздравляем!
Количество попыток: 3

Играем ещё раз?
Введите целое число больше нуля
(или что-то иное для завершения):
Спасибо, что играли в числовую угадайку. Еще увидимся...</code></pre>
<p>Стратегия данной игры обсуждается <a href="../algorithms_and_data_structures.html#guessing_game_strategy">здесь</a>.</p>
<hr />
<p><a name="index_entry_p_2"></a></p>
<h1 id="_2">Магический шар</h1>
<p>Описание проекта: магический шар (шар судьбы) — шуточный способ предсказывать будущее. Программа 
должна просить пользователя задать некий вопрос, чтобы случайным образом на него ответить.</p>
<pre class="highlight"><code class="language-code">from random import randint


answers = ['Бесспорно.', 'Мне кажется - да.', 'Пока неясно.', 'Попробуй снова.', 
           'Даже не думай !', 'Предрешено.', 'Вероятнее всего.', 'Спроси позже.', 
           'Мой ответ - нет.', 'Никаких сомнений.', 'Хорошие перспективы.', 
           'Лучше не рассказывать.', 'По моим данным - нет.', 'Определённо да.',
           'Знаки говорят - да.', 'Сейчас нельзя предсказать.', 'Перспективы не очень хорошие.', 
           'Можешь быть уверен в этом', 'Да.', 'Сконцентрируйся и спроси опять.', 
           'Весьма сомнительно.']

def magic_ball():
    s = input('Твой вопрос: ')
    print(answers[randint(0, 19)])


print('Привет Мир, я магический шар, и я знаю ответ на любой вопрос.')      
name = input('Как тебя зовут?: ')   
print('Привет,', name)
while True:
    magic_ball()
    yes_no = input('Ты хочешь задать вопрос еще раз? ["+" - да, "-" - нет]: ')
    if yes_no == '+':
        continue
    elif yes_no == '-':
        print('Возвращайся если возникнут вопросы!')
        break</code></pre>
<pre class="highlight"><code class="language-shell">&gt;python magic_ball.py
Привет Мир, я магический шар, и я знаю ответ на любой вопрос.
Как тебя зовут?: Феофан
Привет, Феофан
Твой вопрос: Есть ли жизнь на Марсе?
Попробуй снова.
Ты хочешь задать вопрос еще раз? ["+" - да, "-" - нет]: -
Возвращайся если возникнут вопросы!</code></pre>
<hr />
<p><a name="index_entry_p_3"></a></p>
<h1 id="_3">Генератор безопасных паролей</h1>
<p>Описание проекта: программа генерирует заданное количество паролей и включает в себя 
настройку на длину пароля, а также на то, какие символы требуется в него включить, а какие 
исключить.</p>
<pre class="highlight"><code class="language-code">from random import randint, shuffle

digits = '0123456789'
lowercase_letters = 'abcdefghijklmnopqrstuvwxyz'
uppercase_letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 
punctuation = '!#$%&amp;*+-=?@^_.'
ambiguous = 'il1Lo0O'


def input_true_false(prompt):
    while True:
        answer = input(prompt).strip().lower()
        if answer == 'да':
            return True
        if answer == 'нет':
            return False
        else:
            print('Надо ввести: да или нет.')


def generate_password(length, chars_list):
    if length &lt; 1:
        raise Exception ('Длина пароля &lt; 1.') # Выброс исключения
    if len(chars_list) &lt; 1:
        raise Exception ('Количество типов символов &lt; 1.') # Выброс исключения 
    if len(chars_list) &gt; length:
        raise Exception ('Количество типов символов &gt; длины пароля.') # Выброс исключения         
    password = []
    for chars in chars_list:
        password.append(chars[randint(0, len(chars) - 1)])
    for _ in range(length - len(chars_list)):
        chars = chars_list[randint(0, len(chars_list) - 1)]
        char = chars[randint(0, len(chars) - 1)]
        password.append(char)
    shuffle(password)
    return ''.join(password)


chars_list = []
num = int(input('Сколько паролей нужно? '))
length = int(input('Какая длина одного пароля? '))
if input_true_false(f'Включать цифры ({digits})? [да/нет]: '):
    chars_list.append(set(digits))
if input_true_false(f'Включать прописные буквы ({uppercase_letters})? [да/нет]: '):
    chars_list.append(set(uppercase_letters))
if input_true_false(f'Включать строчные буквы ({lowercase_letters})? [да/нет]: '):
    chars_list.append(set(lowercase_letters))
if input_true_false(f'Включать символы пунктуации ({punctuation})? [да/нет]: '):
    chars_list.append(set(punctuation))
if input_true_false(f'Исключать неоднозначные символы ({ambiguous})? [да/нет]: '):
    to_remove = set(ambiguous)
    for i in range(len(chars_list)):
        chars_list[i] = chars_list[i] - to_remove
chars_list = [list(el) for el in chars_list]


for _ in range(num):  
    print(generate_password(length, chars_list))  </code></pre>
<p>Для удобства реализации используем служебную функцию <code>input_true_false</code>, которая корректно 
запрашивает у пользователя ответ на вопрос типа "да/нет".</p>
<p>Функция <code>generate_password</code> ответственна за генерацию одного пароля. Мы решили, что пароль должен 
содержать хотя бы по одному символу каждого указанного типа, поэтому функция принимает список
списков.</p>
<p>Для исключения неоднозначных символов используется операция разности множеств. Перед вызовом 
функции <code>generate_password</code> список множеств преобразуется в список списков.</p>
<p>Пример работы программы:</p>
<pre class="highlight"><code class="language-shell">&gt;python secure_password.py
Сколько паролей нужно? 4
Какая длина одного пароля? 14
Включать цифры (0123456789)? [да/нет]: +
Надо ввести: да или нет.
Включать цифры (0123456789)? [да/нет]: да
Включать прописные буквы (ABCDEFGHIJKLMNOPQRSTUVWXYZ)? [да/нет]: да
Включать строчные буквы (abcdefghijklmnopqrstuvwxyz)? [да/нет]: да
Включать символы пунктуации (!#$%&amp;*+-=?@^_.)? [да/нет]: нет
Исключать неоднозначные символы (il1Lo0O)? [да/нет]: да
H67en6w83n8dhf
NxjYyz43v78V3F
ASeW5s4Hstx9TJ
8gcaH834KGneEn</code></pre>
<hr />
<p><a name="index_entry_p_4"></a><a name="caesar1"></a></p>
<h1 id="_4">Шифр Цезаря</h1>
<p>Предыдущий вариант задачи описан <a href="4_python_drill.html#caesar">здесь</a>. В этом варианте 
сделаем следующие изменения:</p>
<ul>
<li>шифруются только символы из алфавита, остальные выводятся без изменения;</li>
<li>учитывается регистр символов;</li>
<li>программа поддерживает несколько алфавитов;</li>
<li>входной текст поступает из консольного ввода, результат выводится так же в консоль;</li>
<li>программа позволяет перебор смещений (для подбора неизвестного пароля).</li>
</ul>
<pre class="highlight"><code class="language-code">import sys


alfs = {'en': 'abcdefghijklmnopqrstuvwxyz', 
        'ru': 'абвгдежзийклмнопрстуфхцчшщъыьэюя',
        }
indexes = {k:{v[i] : i for i in range(len(v))} for k, v in alfs.items()}

def caesar(sring, shift, lang):
    alf = alfs[lang]
    l = len(alf)
    index = indexes[lang]
    result = []
    for c in sring:
        c_lower = c.lower()
        c_isupper = c.isupper()
        if c_lower not in index:
            result.append(c)
        else:
            c_new = alf[(index[c_lower] + shift) % l]
            result.append(c_new.upper() if c_isupper else c_new)
    return ''.join(result)


shift = sys.argv[1]
lang = sys.argv[2].strip().lower()

while True:
    try:
        sring = input()
    except EOFError:
        break
    if shift == '?':
        for i in range(1, len(alfs[lang])):
            print(f"{i}:".rjust(4, ' '), caesar(sring, i, lang))
    else:
        print(caesar(sring, int(shift), lang))                 </code></pre>
<pre class="highlight"><code class="language-code">sring = input()
result = []
word = []
lang = 'en'
index = indexes[lang]
for c in sring:
    if c.lower() in index:
        word.append(c)
    else:
        if word:
            result.append(caesar(word, len(word), lang))
        result.append(c)
        word = []
if word:
    result.append(caesar(word, len(word), lang)) 

print(''.join(result))</code></pre>
<p><a name="index_entry_i_1"></a>
Используем массив <code>sys.argv</code> для получения переданных программе аргументов командной строки.</p>
<pre class="highlight"><code class="language-shell">&gt;python caesar.py  11 ru
Я люблю своего кота Федора!
К цймцй ьнщрощ хщэл Ярпщыл!
^Z

&gt;python caesar.py  -11 ru
К цймцй ьнщрощ хщэл Ярпщыл!
Я люблю своего кота Федора!
^Z

&gt;python caesar.py ?  en
Hawnj pk swhg xabkna ukq nqj.
  1: Ibxok ql txih ybclob vlr ork.
  2: Jcypl rm uyji zcdmpc wms psl.
  3: Kdzqm sn vzkj adenqd xnt qtm.
  4: Learn to walk before you run.
  5: Mfbso up xbml cfgpsf zpv svo.
.  .  .  </code></pre>
<hr />
<p><a name="index_entry_p_5"></a></p>
<h1 id="_5">Выбор уникальных сообщений</h1>
<p>Некий поэтический канал публикует короткие стихотворения. Однако было замечено, что автор 
периодически повторяет свои предыдущие публикации. Требуется вывести уникальные публикации.</p>
<p><a name="index_entry_p_6"></a>
Всю историю сообщений из этого канала можно выгрузить в формате JSON. Структура документа JSON
следующая: </p>
<pre class="highlight"><code class="language-wrapped">{
 "name": "???",
 "type": "public_channel",
 "id": 00000,
 "messages": [
  {
   "id": 3,
   "type": "message",
   "date": "2016-06-23T15:51:08",
   "date_unixtime": "1466686268",
   "from": "???",
   "from_id": "???",
   "text": "когда земную жизнь окончу\nпопробую еще разок\nно уровень возьму сложнее\nкамбоджа семьдесят шестой",
   "text_entities": [
    {
     "type": "plain",
     "text": "когда земную жизнь окончу\nпопробую еще разок\nно уровень возьму сложнее\nкамбоджа семьдесят шестой"
    }
   ]
  },
  .  .  .
 ]
}</code></pre>
<p>Как видно из образца, корневым элементом документа является объект JSON, из которого нам требуется
атрибут <code>messages</code>, который является списком. Элементы этого списка представляют собственно 
публикации, являются объектами, и нам из них требуется поле <code>text</code>.</p>
<pre class="highlight"><code class="language-code">import json


with open('input.json', 'r', encoding='UTF-8') as f:
    j = json.loads(f.read())

print(len(j["messages"]))

s = set()
count = 0
with open('output.txt', 'w', encoding='UTF-8') as f:
    for m in j["messages"]:
        text = m["text"]
        if type(text) is str:
            text = text.replace(" \n", "\n")
            if text not in s:
                s.add(text)
                count += 1
                f.write(f"----------------- {count}, {m['date']} --------------------\n")
                f.write(text + "\n")</code></pre>
<p>Для разбора документа JSON используется стандартная библиотека Python, которая представляет документ
JSON, переменная <code>j</code>, в виде имеющихся в языке Python структур данных, таких как словарь и список.</p>
<p>Для исключения повторов используется <em>множество</em> (<code>set</code>).</p>
<p>Выяснилось, что некоторые публикации имеют пробелы в конце строк, которые делают одинаковые по сути
публикации разными. После удаления этих пробелов количество сообщений сократилось примерно на сотню.</p>
<hr />
<p><a name="index_entry_p_7"></a></p>
<h1 id="textart">Цифры в стиле Textart</h1>
<p>На вход программе подаётся последовательность цифр, которую нужно вывести на экран в стиле <em>Textart</em>,
который ещё иногда называется <em>псевдографическим</em>.</p>
<p>Размер всех цифр 4 символа в ширину, и было решено реализовать три различных размера по высоте. 
Между цифрами в выводе должен быть один пустой столбец. Перед первой цифрой не должно быть пробелов.</p>
<p>Интерфейс. Программа принимает 1 или 2 аргумента. Первый аргумент представляет число, которое будет 
выведено в стиле Textart, второй аргумент указывает высоту цифр: small, medium (по умолчанию), 
large. </p>
<pre class="highlight"><code class="language-code">from sys import argv 


templates = {
    "large": [
        ' --        --   --        --   --   --   --   -- ',
        '|  |    |    |    | |  | |    |       | |  | |  |',
        '|  |    |    |    | |  | |    |       | |  | |  |',
        '           --   --   --   --   --        --   -- ',
        '|  |    | |       |    |    | |  |    | |  |    |',
        '|  |    | |       |    |    | |  |    | |  |    |',
        ' --        --   --        --   --        --   -- ',
    ],
    "medium": [
        ' __        __   __        __   __   __   __   __ ',
        '|  |   /|    |    | |  | |    |       | |  | |  |',
        '|  |  / |  __|  __| |__| |__  |__    /  |__| |__|',
        '|  |    | |       |    |    | |  |  |   |  |    |',
        '|__|    | |__   __|    |  __| |__|  |   |__|  __|',
    ],   
    "small": [
        ' __        __   __        __   __   __   __   __ ',
        '|  |   /|  __|  __| |__| |__  |__    /  |__| |__|',
        '|__|    | |__   __|    |  __| |__|  |   |__|  __|',
    ]
}

if len(argv) not in [2, 3]:
    raise Exception('Аргументы: 1 - число, 2 - размер: small, medium (по умолчанию), large') 

digits = [int(d) for d in argv[1]]   
size = argv[2].lower() if len(argv) == 3 else "medium"

for line in templates[size]:
    space = ''
    for d in digits:
        print(space + line[d * 5:d * 5 + 4], end='')
        space = ' '
    print()</code></pre>
<pre class="highlight"><code class="language-shell">&gt;python program.py 4356789
      __   __   __   __   __   __
|  |    | |    |       | |  | |  |
|__|  __| |__  |__    /  |__| |__|
   |    |    | |  |  |   |  |    |
   |  __|  __| |__|  |   |__|  __|

&gt;python program.py 4356789 small
      __   __   __   __   __   __
|__|  __| |__  |__    /  |__| |__|
   |  __|  __| |__|  |   |__|  __|

&gt;python program.py 4356789 large
      --   --   --   --   --   --
|  |    | |    |       | |  | |  |
|  |    | |    |       | |  | |  |
 --   --   --   --        --   --
   |    |    | |  |    | |  |    |
   |    |    | |  |    | |  |    |
      --   --   --        --   --</code></pre>
<p>&nbsp;</p>
<hr />

<p style="margin-top:0px;margin-bottom:0px;text-align:right;"><a href="5_chess.html" 
title="Previous: 5 Шахматы"><img src="../../layout/pict/previous_page.png"
alt="Back"></a>

<img src="../../layout/pict/next_page_inactive.png" alt="No next"></p>

<script>
function toggleSidebar() {
    let sidebar = document.getElementsByClassName("sidebarWrapper")[0]
    let display = sidebar.style.display
    if (!display || display == "none") {
        sidebar.style.display = "block"
    } else {
        sidebar.style.display = ""
    }
}
</script>

</body>
</html>
