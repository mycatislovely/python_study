<!DOCTYPE html>
<html lang="en">
<head><title>Приемы программирования</title>
<meta charset="utf-8">
<link rel="shortcut icon" type="image/png" href="../favicon.png">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="../layout/content.css">
<link rel="stylesheet" type="text/css" href="../layout/more_prog_langs.css">
<link rel="stylesheet" type="text/css" href="../themes/light/content_theme.css">
<link rel="stylesheet" type="text/css" href="../themes/light/more_prog_langs_theme.css">
<link rel="stylesheet" type="text/css" href="../layout/layout.css">
<link rel="stylesheet" type="text/css" href="../themes/light/layout_theme.css">
<link rel="stylesheet" type="text/css" href="../custom.css">

<link rel="stylesheet" type="text/css" href="../layout/flex.css">
</head>
<body>

<div class="header">
<img id="burger" src="../layout/pict/burger.png" 
onclick="toggleSidebar();return false;" class="toggle_narrow_only_inline" alt="Sidebar">

<a 
class="header_item "
href="../../readme.html"><img 
class="logo_image" src="../favicon.png" alt="Logo"></a><a 
class="header_item toggle_wide_only_inline"
href="../../readme.html"><span class="">Home</span></a><a 
class="header_item toggle_wide_only_inline"
href="index_page.html"><span class="">Index</span></a><a 
class="header_item "
href="todo_page.html"><span class="">TODO</span></a><a 
class="header_item "
href="problems_page.html"><span class="">Задачи</span></a><a 
class="header_item toggle_narrow_only_inline"
href="index_page.html"><img 
class="header_image index_image" src="../layout/pict/search.png" alt="Index"></a><a 
class="header_item toggle_wide_only_inline "
href="https://github.com/mycatislovely/python_study"><span class="">GitHub</span></a>
<a href="../../doc_src/programming_techniques.txt" class="source_file toggle_wide_only_inline" title="Source text">&lt;/&gt;</a>

<a href="python_program_elements.html" title="Previous: Элементы программы на языке Python"><img class="headerNavArrows"
src="../layout/pict/previous_page_h21px.png" alt="Back"></a>
 
<a href="algorithms_and_data_structures.html" title="Next: Алгоритмы и структуры данных"><img class="headerNavArrows"
src="../layout/pict/next_page_h21px.png" alt="Next"></a>


<span class="headerTitle">Приемы программирования</span>

</div>

<div class="sidebarWrapper">
<div class="sidebar">
    <table class="sidebarAligner">
        <tr><td class="valign_top">
            <div class="align_right toggle_narrow_only_block">
            <a class="sidebar_item_inline align_right" href="https://github.com/mycatislovely/python_study">GitHub</a>
            
            <a href="../../doc_src/programming_techniques.txt" class="sidebar_item_inline source_file align_right" 
                title="Source text">&lt;/&gt;</a>
            
            </div>
            <div class="sidebar_block">
            
            <a class="sidebar_item " href="../../readme.html">Введение</a>
            <a class="sidebar_item " href="architecture.html">Основы программирования</a>
            <a class="sidebar_item " href="program_design.html">Проектирование программ</a>
            <a class="sidebar_item " href="command_line_work.html">Работа в командной строке</a>
            <a class="sidebar_item " href="related_technologies.html">Сопутствующие технологии</a>
            <a class="sidebar_item " href="python_working_environment.html">Рабочая среда Python</a>
            <a class="sidebar_item " href="python_program_elements.html">Элементы программы на языке Python</a>
            <a class="sidebar_item selected " href="programming_techniques.html">Приемы программирования</a>
            <a class="sidebar_item " href="algorithms_and_data_structures.html">Алгоритмы и структуры данных</a>
            <a class="sidebar_item " href="web_programming.html">Веб-программирование</a>
            <a class="sidebar_item " href="technical_English.html">Technical English</a>
            </div><div class="sidebar_block">
            <h3>Useful links</h3>
            <a class="sidebar_item " href="https://www.python.org/">Python</a>
            <a class="sidebar_item " href="https://git-scm.com/">Git</a>
            </div>
        </td></tr>
        <tr><td class="bottom valign_bottom"><span class="poweredBy">Powered by <a class="poweredByLink"
            href="https://github.com/arctrong/md2html">md2html_py</a> 1.0.7</span>
        </td></tr>
    </table>
</div>
</div>

<p style="font-size:44px;font-weight:bold;margin:0 0 30px 0;">Приемы программирования</p>

<div class="toc">
<ul>
<li><a href="#_1">О разделе</a></li>
<li><a href="#_2">Итерации</a></li>
<li><a href="#_3">Эффективное построение строки</a></li>
<li><a href="#_4">Форматирование строк</a></li>
<li><a href="#_5">Простой метод формирования коллекций</a></li>
<li><a href="#_6">Функциональный стиль программирования</a></li>
</ul>
</div>
<hr />
<h1 id="_1">О разделе</h1>
<p>В этом разделе рассматриваются решение типичных задач.</p>
<hr />
<p><a name="index_entry_i_1"></a></p>
<h1 id="_2">Итерации</h1>
<p>Итерация &mdash; это повторение фрагмента программы по некоторому набору данных или по условию. 
Итерации требуются для решения очень большого количества задач в программировании.</p>
<p>Рассмотрим итерацию <em>по условию</em> на примере псевдокода. </p>
<pre class="highlight"><code>while &lt;условие&gt;:
    &lt;действия&gt;</code></pre>
<p>При написании конкретного кода нам требуется определить две вещи:</p>
<ul>
<li>определить условие, при котором тело цикла выполняется;</li>
<li>набор действий, которые выполняются в теле цикла.</li>
</ul>
<p>Несколько более сложным для понимания вариантом итерации, является итерация по <em>набору данных</em>, 
однако она позволяет нам существенно сократить размер кода и улучшить его читаемость. 
Схема выглядит так:</p>
<pre class="highlight"><code>for &lt;переменная цикла&gt; in &lt;итерируемый объект&gt;:
    &lt;действия с переменной цикла&gt;
    &lt;другие действия&gt;</code></pre>
<p>В качестве итерируемого объекта может использоваться коллекция, генератор или, возможно другие 
подобные объекты. Цикл <em>for</em> последовательно выбирает из итерируемого объекта значения, присваивает
эти значения переменной цикла и выполняет определенные в теле цикла действия. Эти действия могут
использовать переменную цикла на чтении, изменения переменной в теле цикла, как правило не 
используются.</p>
<p>Применительно к спискам могут использоваться два основных варианта итерации:</p>
<ul>
<li>перебор самих элементов списка, это делается также, как и для остальных коллекций;</li>
<li>доступ по индексу, в этом случае может использоваться генератор последовательности <code>(range())</code>.</li>
</ul>
<p>Этот вариант является более сложным, но он необходим в двух случаях:</p>
<pre><code>- когда нам нужны сами индексы;
- когда требуется не по всей коллекции, а по ее части.
</code></pre>
<p>Итератор — это поведенческий паттерн, позволяющий последовательно обходить сложную коллекцию, 
без раскрытия деталей её реализации. Код использующий итератор зачастую вообще не имеет ссылок на 
коллекцию, с которой работает итератор. Итератор либо принимает коллекцию в параметрах конструктора 
при создании, либо возвращается самой коллекцией.</p>
<p>for в Python может использоваться для итерации по списку.
Источник: https://pythonim.ru/list/iteratsiya-spiska-python</p>
<p>Метод range() позволяет пользователю создавать серию элементов в указанном диапазоне. for вместе 
с функцией range() можно использовать для итерации по списку.</p>
<p>Цикл while Python можно использовать для перебора списка.</p>
<hr />
<p><a name="index_entry_i_2"></a><a name="string_buffer"></a></p>
<h1 id="_3">Эффективное построение строки</h1>
<p>Часто требуется формировать строку путем последовательного наращения. При использовании операции
конкатенации каждый раз формируется новая строка, а конкатенируемые строки могут оставаться в памяти
какое-то время, пока их не соберет сборщик мусора:</p>
<p><img alt="" src="../pict/StringIO_1.png" /> </p>
<p>При большом количестве наращений (например в цикле) такой способ формирования строки может 
вызвать заметное замедление программы и кратковременный перерасход памяти. </p>
<p>Для решения этой проблемы может быть использован класс стандартной библиотеки Python <code>StringIO</code>.</p>
<p><img alt="" src="../pict/StringIO_2.png" /></p>
<p>Объект <code>StringIO</code> сохраняет добавляемые фрагменты строк, не создавая ненужных объектов. 
Результирующая строка формируется один раз после всех необходимых наращений.</p>
<p>Пример см. в задаче <a href="problems/3_final_tasks.html#crypting">Шифрование</a>.</p>
<p><a name="index_entry_i_3"></a>
Для использования объекта <code>StringIO</code> требуется импорт дополнительного модуля,
<code>from io import StringIO</code>. Есть более простой способ эффективной конкатенации с использованием 
метода <code>join()</code> объекта <code>str</code>(строки). В этом случае фрагменты строк собираются в список, а потом
объединяются в единую строку. При этом так же не расходуется память на промежуточные конкатенации.</p>
<p>Примеры см. в задачах:</p>
<ul>
<li><a href="problems/3_final_tasks.html#series_encoding">Кодирование длин серий</a></li>
<li><a href="problems/3_final_tasks.html#football">Футбол</a></li>
<li><a href="problems/4_python_drill.html#rome_number">Римские числа</a></li>
</ul>
<hr />
<h1 id="_4">Форматирование строк</h1>
<p>Дано: переменная х содержащая числовое значение. Требуется составить строку "х = ...", где 
многоточие, это значение числа х.</p>
<pre class="highlight"><code class="language-shell">&gt;&gt;&gt; mcg = 'x = ' + str(x)
&gt;&gt;&gt; mcg
'x = 12.5'</code></pre>
<p>В языке Python  можно решить задачу проще, используя форматированные строки или это можно назвать 
интерполяцией строк. Буква <code>f</code> перед кавычкой указывает на то, что строка будет форматированной.</p>
<pre class="highlight"><code class="language-shell">&gt;&gt;&gt; mcg = f'x = {x}'
&gt;&gt;&gt; mcg
'x = 12.5'</code></pre>
<p>Без буквы <code>f</code>, строка воспринимается буквально.</p>
<pre class="highlight"><code class="language-shell">&gt;&gt;&gt; mcg = 'x = {x}'
&gt;&gt;&gt; mcg
'x = {x}'</code></pre>
<p>Преимущества:</p>
<ul>
<li>проще понять, как будет выглядеть результат;</li>
<li>вставляемое в фигурных скобках выражение автоматически приводится к строковому типу. Внутри {}
можно указать параметры вывода. Более подробно смотри
<a href="https://metanit.com/python/tutorial/5.3.php">здесь</a></li>
</ul>
<hr />
<h1 id="_5">Простой метод формирования коллекций</h1>
<p><a name="index_entry_i_4"></a>
Традиционным способом формирования коллекции является следующая последовательность действий.</p>
<ol>
<li>Создать пустую коллекцию.</li>
<li>Последовательно добавить в нее необходимые элементы.</li>
<li>Вернуть полученную   коллекцию. </li>
</ol>
<p>В ряде случаев можно использовать сокращенный вариант на основе имеющихся итерируемых объектов &mdash;
<a href="python_program_elements.html#collection_comprehension">list comprehension</a></p>
<hr />
<p><a name="index_entry_i_5"></a></p>
<h1 id="_6">Функциональный стиль программирования</h1>
<p>Рассмотрим такую задачу: 
На вход программе подается строка текста, содержащая целые числа, разделенные символом пробела. 
Написать программу, которая выведет квадраты четных чисел, которые не оканчиваются на цифру 4.</p>
<p>При решении удобно рассматривать входные данные как поток значений над которым выполняются операции.
В данном случае операции будут следующие: </p>
<ul>
<li>преобразовать из строки в число;</li>
<li>отфильтровать по заданному условию;</li>
<li>преобразовать (трансформировать).</li>
</ul>
<p>Такое представление, будучи реализованным, обладает хорошей читаемостью, и при необходимости может 
быть расширенно без потери читаемости.</p>
<p>В данной задаче мы можем обрабатывать каждое значение "на лету", не сохраняя (материализуя) 
промежуточный результат в памяти. Для таких целей хорошо подходят генераторы.</p>
<pre class="highlight"><code class="language-code">numbers = (int(i) for i in input().split())  # 1
select = (i for i in numbers if i % 2 == 0 and i ** 2 % 10 != 4)  # 2
transform = (i ** 2 for i in select)  # 3
print(*transform)  # 4</code></pre>
<p>В строке 1 создается генератор вводящий строку с клавиатуры и возвращающий набор чисел из этой 
строки. При этом сами эти действия здесь пока еще не выполняются. </p>
<p>Генератор в строке 2 (<code>select</code>) принимает поток чисел из созданного ранее генератора и выполняет
фильтрацию. Опять же, это действие здесь только определено, его выполнение отложено.</p>
<p>Генератор в строке 3 (<code>transform</code>) выполняет преобразование (возводит в квадрат) так же в отложенном
режиме.</p>
<p>В строке 4 процесс фактически запускается. Генераторы последовательно обращаются друг к другу,
образуя своего рода конвейер.</p>
<p>Предположим теперь нам понадобилось выводить числа в квадратных скобках. Для этого можно между 
строками 3 и 4 добавить:</p>
<pre class="highlight"><code class="language-code">brackets = (f'[{i}]' for i in transform)</code></pre>
<p>В строке 4 понадобится только заменить <code>transform</code> на <code>brackets</code>.</p>
<p>&nbsp;</p>
<hr />

<p style="margin-top:0px;margin-bottom:0px;text-align:right;"><a href="python_program_elements.html" 
title="Previous: Элементы программы на языке Python"><img src="../layout/pict/previous_page.png"
alt="Back"></a>
<a href="algorithms_and_data_structures.html" title="Next: Алгоритмы и структуры данных"><img 
src="../layout/pict/next_page.png" alt="Next"></a>
</p>

<script>
function toggleSidebar() {
    let sidebar = document.getElementsByClassName("sidebarWrapper")[0]
    let display = sidebar.style.display
    if (!display || display == "none") {
        sidebar.style.display = "block"
    } else {
        sidebar.style.display = ""
    }
}
</script>

</body>
</html>
